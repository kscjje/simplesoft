<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
		xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
		layout:decorate="~{layouts/mypage_layout}">
		<main class="content-wrapper" layout:fragment="content">
			<style>
				.content-container {
					max-width: 600px;
					min-height: 60vh;
					margin: 0 auto;
				}
			</style>
			<div class="content-container justify-content-center text-center">
				<th:block th:replace="fragments/mypageTabs :: mypageTabs(${activeMenu})"></th:block>
				
				<th:block th:if="${session.memberInfo == null}">
					<div class="rounded-lg p-4 h-90 overflow-y-auto text-sm text-gray-700 leading-relaxed mb-5">
						<div class="gap-3 bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6">
							<p class="text-lg font-bold mb-2">비밀번호 확인</p>
							<p class="text-sm leading-relaxed">
								<strong class="text-gray-500">회원정보 변경을 위해 고객님의 본인 확인 절차가 필요하며,<br>비밀번호 입력을 부탁드립니다.</strong>
							</p>
						</div>
						<!-- 비밀번호 -->
						<div class="mb-4">
							<label for="pwd" class="block mb-2 text-sm font-bold text-gray-700 text-start">비밀번호 확인<font color="red"> *</font></label>
							<input type="password" name="pwd" id="pwd" autofocus placeholder="비밀번호를 입력해 주세요." maxlength="20" onkeypress="enterKey()"
								class="w-full px-4 py-3 border border-gray-300 text-lg rounded focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-transparent">
						</div>
						<!-- 로그인 버튼 -->
						<button type="button" class="w-full py-3 font-bold text-white bg-black rounded hover:bg-gray-800 transition-colors" onclick="fnLogin()">
							확인
						</button>
					</div>
				</th:block>
				<th:block th:if="${session.memberInfo != null}">
					<div class="container mx-auto px-4">
						<!-- 주문 정보 카드 -->
						<div class="bg-white rounded-2xl card-shadow p-6 mb-8">
							<div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
								<div class="flex-1">
									<div class="flex items-center justify-between mb-2">
										<h2 class="text-2xl font-bold text-gray-800">주문 내역</h2>
									</div>
									<div class="items-center text-gray-600">
										<span class="items-center">
											<span style="color: red;">환불 신청된 주문입니다.</span>
										</span>
									</div>
								</div>
							</div>
						</div>
					</div>
				</th:block>
			</div>
			<script th:inline="javascript">
				home = function (){
					location.href="/";
				}
				fnLogin = function(){
					let pwd = $('#pwd').val();
					
					if(pwd == ""){
						alert("비밀번호를 입력해 주세요.")
						$('#pwd').focus();
						return;
					}
					let loginInfo = {
						userPw : pwd
					}
					$.ajax({
						url : "/rest/member/memberInfoAjax",
						type : "POST",
						dataType : "json",
						data : loginInfo,
						success : function(data) {
							console.log(data)
							if(data.data.RESULT == "SUCCESS"){
								location.reload();
							} else if(data.data.RESULT == "NONE"){
								location.reload();
							} else {
								alert("비밀번호가 정확하지 않습니다.");
								$('#userPw').val("");
							}
						}, error : function(request, status, error) {
							alert("에러코드: " + request.status + "\n메시지: " + request.responseText);
						}
					});
				}
				enterKey = function(type){
					if (window.event.keyCode == 13) {
						fnLogin();
					}
				}
			</script>

		</main>
</html>