<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
		xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
		layout:decorate="~{layouts/mypage_layout}">
		<main class="content-wrapper" layout:fragment="content">
			<style>
				.content-container {
					max-width: 600px;
					min-height: 60vh;
					margin: 0 auto;
				}
			</style>
			<div class="content-container justify-content-center text-center">
				<th:block th:if="${session.memberInfo == null}">
					<div class="row content-container justify-content-center text-center">
						<div class="col-lg-8">
							<h2 class="mb-4 text-2xl text-bold">비밀번호 확인</h2>
							<div class="alert alert-primary" role="alert">
								<span class="small">
									회원정보를 수정하기전 고객님의 본인 확인을 위한<br>
									비밀번호 입력을 진행해 주시길 바랍니다.</span>
							</div>
							<!-- 비밀번호 -->
							<div class="mb-4 mt-4">
								<label for="pwd" class="block mb-2 text-lg font-semibold text-gray-700 text-start">비밀번호</label>
								<input type="password" name="pwd" id="pwd" placeholder="비밀번호를 입력해 주세요." maxlength="20" onkeypress="enterKey()"
									class="w-full px-4 py-3 border border-gray-300 text-lg rounded focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-transparent">
							</div>
					
							<!-- 로그인 버튼 -->
							
							<div class="flex justify-end space-x-3 mt-6">
								<button type="button" class="w-full py-3 font-bold text-white bg-black rounded hover:bg-gray-800 transition-colors" onclick="fnLogin()">
									확인
								</button>
								<button type="button" class="w-full py-3 font-bold text-black bg-gray-300 rounded transition-colors" onclick="home()">
									취소
								</button>
							</div>
						</div>
					</div>
				</th:block>
				<th:block th:if="${session.memberInfo != null}">
					<div class="container mx-auto px-4">
						<!-- 주문 정보 카드 -->
						<div class="bg-white rounded-2xl card-shadow p-6 mb-8">
							<div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
								<div class="flex-1">
									<div class="flex items-center justify-between mb-2">
										<h2 class="text-2xl font-bold text-gray-800">주문 내역</h2>
									</div>
									<div class="items-center text-gray-600">
										<span class="items-center">
											<span style="color: red;">환불 신청된 주문입니다.</span>
										</span>
									</div>
								</div>
							</div>
						</div>
					</div>
				</th:block>
			</div>
			<script th:inline="javascript">
				home = function (){
					location.href="/";
				}
				fnLogin = function(){
					let pwd = $('#pwd').val();
					
					if(pwd == ""){
						alert("비밀번호를 입력해 주세요.")
						$('#pwd').focus();
						return;
					}
					let loginInfo = {
						userPw : pwd
					}
					$.ajax({
						url : "/rest/member/memberInfoAjax",
						type : "POST",
						dataType : "json",
						data : loginInfo,
						success : function(data) {
							console.log(data)
							if(data.data.RESULT == "SUCCESS"){
								location.reload();
							} else if(data.data.RESULT == "NONE"){
								location.reload();
							} else {
								alert("비밀번호가 정확하지 않습니다.");
								$('#userPw').val("");
							}
						}, error : function(request, status, error) {
							alert("에러코드: " + request.status + "\n메시지: " + request.responseText);
						}
					});
				}
				enterKey = function(type){
					if (window.event.keyCode == 13) {
						fnLogin();
					}
				}
			</script>

		</main>
</html>